# the complete user structure: app/models/schemas/user_schema.go
# this schema file is only use for go graphql to improve better user experience

type PublicUser {
  # id: UUID!
  name: String! # the identifier of the PublicUser
  displayName: String!
  email: String! # the secondary indentifier of the PublicUser
  # password: String!
  # refreshToken: String!
  # loginCount: Int
  # blockLoginUtil: Time!
  # userAgent: String!
  role: UserRole!
  plan: UserPlan!
  prevStatus: UserStatus!
  status: UserStatus!
  createdAt: Time!
  updatedAt: Time!

  # relations
  userInfo: PublicUserInfo!
  badges: [PublicBadge!]!
  themes: [PublicTheme!]!
}

# =============== Searchable Input & Enums & Interfaces =============== #
input SearchableUserFilters {
  role: UserRole
  plan: UserPlan
  status: UserStatus
  hasAvatar: Boolean
  country: Country
  isOnline: Boolean
}

enum SearchableUserSortBy {
  RELEVANCE
  NAME # using this to check both the name and display name fields
  LAST_ACTIVE
  CREATED_AT
}

input SearchableUserInput {
  query: String!
  after: String # base64 encoded cursor
  first: Int = 10
  filters: SearchableUserFilters
  sortBy: SearchableUserSortBy = RELEVANCE
  sortOrder: SearchableSortOrder = DESC
}

type SearchableUserEdge implements Edge {
  node: PublicUser!
  cursor: String!
}

type SearchableUserConnection implements Connection {
  edges: [SearchableUserEdge!]!
  pageInfo: PageInfo!
  totalCount: Int!
  searchTime: Float!
}
